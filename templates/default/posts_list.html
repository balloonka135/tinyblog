{% extends "default/base.html" %}

{% block page_header %}
{% endblock %}

{% block css_header %}
{% endblock %}

{% block js_footer %}
{% endblock %}

{% block content %}
    {% for post in posts %}

    <article>
      <div class="blog-post {%if post.embed_code%}post-video{%elif post.image%}post-image{%elif post.author%}post-quote{%else%}post-text{%endif%}">
        <h2 class="blog-post-title"><a href="{{ url_for('post_detail', slug=post.slug) }}">{{ post.title }}</a></h2>
        <p class="blog-post-meta">{{ post.created_at.strftime('%H:%M %Y-%m-%d') }} |
        {% with total=post.comments|length %}
            {{ total }} comment {%- if total > 1 %}s{%- endif -%}
        {% endwith %}
        | {%for tag in post.tags%}<a href="/tag/{{tag.name}}">{{tag.name}}</a>{%if not loop.last%},{%endif%}{%else%}-no tags-{%endfor%}
        </p>

        {% if post.body %}
          {% if post.author %}
            <blockquote class="quote">
              {{ post.body }}
              <footer>{{ post.author }}</footer>
            </blockquote>
          {% else %}
            <p>{{ post.body|truncate(250) }}</p>
          {% endif %}
        {% endif %}
        {% if post.embed_code %}
          <div class="video">
            {{ post.embed_code|safe() }}
          </div>
        {% endif %}
        {% if post.image %}
          <p class="imagep"><img src="{{ url_for('image_view',slug=post.slug) }}" /><p>
        {% endif %}

      </div><!-- /.blog-post -->
    </article>
    {% endfor %}

    <ul class="pager">
      <li class="previous">
        <a href="#">&larr; Older</a>
      </li>
      <li class="next">
        <a href="#">Newer &rarr;</a>
      </li>
    </ul>

{% endblock %}
